<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุจุงุฏุฑุฉ ุฑูุถุงู ุงูุฃุซุฑ | ุฅุชูุงู</title>
    <meta name="description" content="ูุชุงุจุนุฉ ุญูุฉ ููููุงู ูุงููุณุงููุงุช ูู ูุดุงุฑูุน ูุจุงุฏุฑุฉ ุฑูุถุงู ุงูุฃุซุฑ">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { 'ibm': ['IBM Plex Sans Arabic', 'sans-serif'] },
                    colors: {
                        border: 'hsl(var(--border))',
                        ring: 'hsl(var(--ring))',
                        background: 'hsl(var(--background))',
                        foreground: 'hsl(var(--foreground))',
                        primary: { DEFAULT: 'hsl(var(--primary))', foreground: 'hsl(var(--primary-foreground))' },
                        secondary: { DEFAULT: 'hsl(var(--secondary))', foreground: 'hsl(var(--secondary-foreground))' },
                        muted: { DEFAULT: 'hsl(var(--muted))', foreground: 'hsl(var(--muted-foreground))' },
                        accent: { DEFAULT: 'hsl(var(--accent))', foreground: 'hsl(var(--accent-foreground))' },
                        card: { DEFAULT: 'hsl(var(--card))', foreground: 'hsl(var(--card-foreground))' },
                    },
                    borderRadius: { lg: 'var(--radius)', md: 'calc(var(--radius) - 2px)', sm: 'calc(var(--radius) - 4px)' }
                }
            }
        }
    </script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/styles.css">
</head>

<body class="font-ibm min-h-screen dark">
    <!-- Navbar -->
    <nav class="navbar">
        <div class="navbar-container">
            <div class="navbar-brand">
                <i data-lucide="trophy" class="w-5 h-5 text-primary"></i>
                <span class="navbar-title">ูุจุงุฏุฑุฉ ุฑูุถุงู ุงูุฃุซุฑ</span>
            </div>

            <div class="navbar-stats">
                <div class="navbar-stat">
                    <span class="navbar-stat-value" id="stat-open">0</span>
                    <span class="navbar-stat-label">ููุชูุญุฉ</span>
                </div>
                <div class="navbar-stat">
                    <span class="navbar-stat-value" id="stat-comments">0</span>
                    <span class="navbar-stat-label">ุจุชุนูููุงุช</span>
                </div>
                <div class="navbar-stat">
                    <span class="navbar-stat-value" id="stat-assigned">0</span>
                    <span class="navbar-stat-label">ูุณูุฏุฉ</span>
                </div>
                <div class="navbar-stat">
                    <span class="navbar-stat-value" id="stat-closed">0</span>
                    <span class="navbar-stat-label">ูุบููุฉ</span>
                </div>
                <div class="navbar-stat">
                    <span class="navbar-stat-value" id="stat-open-prs">0</span>
                    <span class="navbar-stat-label">PR ููุชูุญ</span>
                </div>
                <div class="navbar-stat">
                    <span class="navbar-stat-value" id="stat-merged-prs">0</span>
                    <span class="navbar-stat-label">PR ูุฏูุฌ</span>
                </div>
                <div class="navbar-stat navbar-stat-highlight">
                    <span class="navbar-stat-value" id="stat-points">0/0</span>
                    <span class="navbar-stat-label">ููุงุท</span>
                </div>
            </div>

            <a href="stats.html" class="btn btn-ghost btn-icon" title="ุงูุฅุญุตุงุฆูุงุช">
                <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
            </a>
            <button id="btn-refresh" class="btn btn-ghost btn-icon" title="ุชุญุฏูุซ">
                <i data-lucide="refresh-cw" class="w-4 h-4"></i>
            </button>
            <button id="btn-settings" class="btn btn-ghost btn-icon" title="ุงูุฅุนุฏุงุฏุงุช">
                <i data-lucide="settings" class="w-4 h-4"></i>
            </button>
            <button id="btn-theme" class="btn btn-ghost btn-icon" title="ุชุจุฏูู ุงููุถุน">
                <i data-lucide="sun" class="w-4 h-4 hidden dark:block"></i>
                <i data-lucide="moon" class="w-4 h-4 block dark:hidden"></i>
            </button>
        </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 py-6">
        <!-- Heatmap Section -->
        <div id="heatmap-section" class="mb-8 space-y-4">
            <div class="card p-4">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-sm font-semibold flex items-center gap-2">
                        <i data-lucide="calendar" class="w-4 h-4 text-primary"></i>
                        ุฎุฑูุทุฉ ุงููุดุงุท (30 ููุงูุฑ - 30 ูุงุฑุณ)
                    </h3>
                    <div class="flex items-center gap-4 text-xs text-muted-foreground">
                        <div class="flex items-center gap-1">
                            <span class="w-2 h-2 rounded-sm bg-muted"></span>
                            <span>ุฃูู</span>
                        </div>
                        <div class="flex items-center gap-1">
                            <span class="w-2 h-2 rounded-sm bg-primary opacity-20"></span>
                            <span class="w-2 h-2 rounded-sm bg-primary opacity-50"></span>
                            <span class="w-2 h-2 rounded-sm bg-primary opacity-80"></span>
                            <span class="w-2 h-2 rounded-sm bg-primary"></span>
                            <span>ุฃูุซุฑ</span>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Assigned Heatmap -->
                    <div>
                        <div class="text-xs font-medium mb-3 text-muted-foreground flex items-center gap-1">
                            <i data-lucide="user-plus" class="w-3 h-3"></i>
                            ุงูููุงู ุงููุณูุฏุฉ ููููุงู
                        </div>
                        <div id="heatmap-assigned" class="heatmap-container">
                            <!-- JS will inject heatmap grid here -->
                        </div>
                    </div>

                    <!-- Closed Heatmap -->
                    <div>
                        <div class="text-xs font-medium mb-3 text-muted-foreground flex items-center gap-1">
                            <i data-lucide="check-circle-2" class="w-3 h-3"></i>
                            ุงูููุงู ุงููุบููุฉ ููููุงู
                        </div>
                        <div id="heatmap-closed" class="heatmap-container">
                            <!-- JS will inject heatmap grid here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pull Requests Heatmap Section -->
            <div class="card p-4 mt-4">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-sm font-semibold flex items-center gap-2">
                        <i data-lucide="git-pull-request" class="w-4 h-4 text-orange-500"></i>
                        ุฎุฑูุทุฉ ุทูุจุงุช ุงูุณุญุจ (PRs)
                    </h3>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Merged PRs Heatmap -->
                    <div>
                        <div class="text-xs font-medium mb-3 text-muted-foreground flex items-center gap-1">
                            <i data-lucide="git-merge" class="w-3 h-3"></i>
                            ุทูุจุงุช ุงูุณุญุจ ุงููุฏูุฌุฉ
                        </div>
                        <div id="heatmap-merged-prs" class="heatmap-container">
                            <!-- JS will inject heatmap grid here -->
                        </div>
                    </div>

                    <!-- Open PRs Heatmap -->
                    <div>
                        <div class="text-xs font-medium mb-3 text-muted-foreground flex items-center gap-1">
                            <i data-lucide="clock" class="w-3 h-3"></i>
                            ุทูุจุงุช ุงูุณุญุจ ุงูููุชูุญุฉ/ุงูููุชุธุฑุฉ
                        </div>
                        <div id="heatmap-open-prs" class="heatmap-container">
                            <!-- JS will inject heatmap grid here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tabs -->
        <div class="tabs-container mb-4">
            <div class="tabs">
                <button class="tab active" data-tab="repos">
                    <i data-lucide="folder-git-2" class="w-4 h-4"></i>
                    ุงููุดุงุฑูุน
                </button>
                <button class="tab" data-tab="contributors">
                    <i data-lucide="users" class="w-4 h-4"></i>
                    ุงููุณุงูููู
                </button>
                <button class="tab" data-tab="prs">
                    <i data-lucide="git-pull-request" class="w-4 h-4"></i>
                    ุทูุจุงุช ุงูุณุญุจ
                </button>
            </div>
        </div>

        <!-- Filter Bar (for repos tab) -->
        <div class="filter-bar" id="filter-bar">
            <div class="filter-section">
                <!-- Status Filter -->
                <div class="filter-group">
                    <span class="filter-label">ุงูุญุงูุฉ:</span>
                    <div class="filter-pills">
                        <button class="filter-pill active" data-filter="status" data-value="open">ููุชูุญุฉ</button>
                        <button class="filter-pill" data-filter="status" data-value="closed">ูุบููุฉ</button>
                        <button class="filter-pill" data-filter="status" data-value="all">ุงููู</button>
                    </div>
                </div>

                <!-- Assignment Filter -->
                <div class="filter-group">
                    <span class="filter-label">ุงูุฅุณูุงุฏ:</span>
                    <div class="filter-pills">
                        <button class="filter-pill active" data-filter="assignment" data-value="all">ุงููู</button>
                        <button class="filter-pill" data-filter="assignment" data-value="assigned">ูุณูุฏุฉ</button>
                        <button class="filter-pill" data-filter="assignment" data-value="unassigned">ุบูุฑ ูุณูุฏุฉ</button>
                    </div>
                </div>

                <!-- Comments Filter -->
                <div class="filter-group">
                    <span class="filter-label">ุงูุชุนูููุงุช:</span>
                    <div class="filter-pills">
                        <button class="filter-pill active" data-filter="comments" data-value="all">ุงููู</button>
                        <button class="filter-pill" data-filter="comments" data-value="has-comments">ุจูุง
                            ุชุนูููุงุช</button>
                        <button class="filter-pill" data-filter="comments" data-value="no-comments">ุจุฏูู</button>
                    </div>
                </div>

                <!-- Points Toggle -->
                <div class="filter-group">
                    <label class="toggle-container">
                        <span class="toggle-label">ุฐุงุช ููุงุท ููุท</span>
                        <div class="toggle" id="toggle-points"></div>
                    </label>
                </div>
            </div>

            <!-- Sort -->
            <div class="filter-group">
                <span class="filter-label">ุงูุชุฑุชูุจ:</span>
                <select class="select" id="sort-select">
                    <option value="order">ุงูุงูุชุฑุงุถู</option>
                    <option value="points">ุงูููุงุท</option>
                    <option value="issues">ุนุฏุฏ ุงูููุงู</option>
                    <option value="closed">ุงููุบููุฉ</option>
                    <option value="name">ุงูุงุณู</option>
                </select>
            </div>
        </div>

        <!-- Contributors Filter (for contributors tab) -->
        <div class="filter-bar hidden" id="contributors-filter-bar">
            <div class="filter-section">
                <div class="filter-group">
                    <span class="filter-label">ุงูุชุฑุชูุจ ุญุณุจ:</span>
                    <div class="filter-pills">
                        <button class="filter-pill active" data-filter="contrib-sort" data-value="points">ุงูููุงุท
                            ุงููุญุตูุฉ</button>
                        <button class="filter-pill" data-filter="contrib-sort" data-value="closed">ุงูููุงู
                            ุงููุบููุฉ</button>
                        <button class="filter-pill" data-filter="contrib-sort" data-value="assigned">ุงูููุงู
                            ุงููุณูุฏุฉ</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- PRs Filter (for prs tab) -->
        <div class="filter-bar hidden" id="prs-filter-bar">
            <div class="filter-section">
                <!-- PR Status Filter -->
                <div class="filter-group">
                    <span class="filter-label">ุญุงูุฉ ุงูุทูุจ:</span>
                    <div class="filter-pills">
                        <button class="filter-pill active" data-filter="pr-status" data-value="all">ุงููู</button>
                        <button class="filter-pill" data-filter="pr-status" data-value="open">ููุชูุญุฉ</button>
                        <button class="filter-pill" data-filter="pr-status" data-value="closed">ูุบููุฉ/ูุฏูุฌุฉ</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loading-state" class="flex flex-col items-center justify-center py-20">
            <div class="spinner"></div>
            <p class="mt-4 text-muted-foreground">ุฌุงุฑู ุชุญููู ุงูุจูุงูุงุช...</p>
        </div>

        <!-- Empty State -->
        <div id="empty-state" class="hidden flex flex-col items-center justify-center py-20 text-center">
            <i data-lucide="inbox" class="w-16 h-16 text-muted-foreground mb-4"></i>
            <h3 class="text-lg font-semibold text-foreground">ูุง ุชูุฌุฏ ููุงู</h3>
            <p class="text-muted-foreground">ูุง ุชูุฌุฏ ููุงู ูุทุงุจูุฉ ูุฎูุงุฑุงุช ุงูุชุตููุฉ ุงูุญุงููุฉ.</p>
        </div>

        <!-- Repos Tab Content -->
        <div id="repos-content" class="tab-content">
            <div id="leaderboard" class="space-y-3"></div>
        </div>

        <!-- Contributors Tab Content -->
        <div id="contributors-content" class="tab-content hidden">
            <div id="contributors-leaderboard" class="space-y-3"></div>
        </div>

        <!-- PRs Tab Content -->
        <div id="prs-content" class="tab-content hidden">
            <div id="prs-leaderboard" class="space-y-3"></div>
        </div>
    </main>

    <!-- Issue Modal -->
    <div id="modal-backdrop" class="modal-backdrop"></div>
    <div id="issue-modal" class="modal">
        <div class="modal-header">
            <h2 class="modal-title" id="modal-title">ุนููุงู ุงููููุฉ</h2>
            <button class="modal-close" id="modal-close">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>
        </div>
        <div class="modal-body" id="modal-body">
            <!-- Modal content will be injected here -->
        </div>
        <div class="modal-footer">
            <a id="modal-github-link" href="#" target="_blank" rel="noopener" class="btn btn-primary">
                <i data-lucide="external-link" class="w-4 h-4"></i>
                ูุชุญ ูู GitHub
            </a>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-backdrop" class="modal-backdrop"></div>
    <div id="settings-modal" class="modal" style="max-width: 400px;">
        <div class="modal-header">
            <h2 class="modal-title flex items-center gap-2">
                <i data-lucide="settings" class="w-5 h-5"></i>
                ุงูุฅุนุฏุงุฏุงุช
            </h2>
            <button class="modal-close" id="settings-close">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-2" for="github-token-input">
                        GitHub Token
                        <span class="text-muted-foreground font-normal">(ุงุฎุชูุงุฑู)</span>
                    </label>
                    <input type="password" id="github-token-input"
                        class="w-full px-3 py-2 rounded-md border border-border bg-background text-foreground text-sm"
                        placeholder="ghp_xxxxxxxxxxxx" dir="ltr">
                    <p class="text-xs text-muted-foreground mt-2">
                        ุฃุถู GitHub Token ูุชุฌุงูุฒ ุญุฏ ุงูุทูุจุงุช (60 โ 5000 ุทูุจ/ุณุงุนุฉ).
                        <a href="https://github.com/settings/tokens" target="_blank"
                            class="text-primary hover:underline">ุฅูุดุงุก Token</a>
                    </p>
                </div>

                <div id="token-status" class="text-sm"></div>
            </div>
        </div>
        <div class="modal-footer">
            <button id="btn-clear-token" class="btn btn-ghost text-sm">
                ูุณุญ Token
            </button>
            <button id="btn-save-token" class="btn btn-primary text-sm">
                ุญูุธ
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="border-t border-border py-6 mt-12">
        <div class="max-w-6xl mx-auto px-4 text-center text-muted-foreground text-sm">
            ูุดุฑูุน ููุชูุญ ุงููุตุฏุฑ ูู <a href="https://github.com/Itqan-community" target="_blank"
                class="text-primary hover:underline">ูุฌุชูุน ุฅุชูุงู</a> ๐
        </div>
    </footer>

    <!-- Day Activity Modal -->
    <div id="day-backdrop" class="modal-backdrop"></div>
    <div id="day-modal" class="modal">
        <div class="modal-header">
            <h2 class="modal-title" id="day-modal-title">ูุดุงุท ุงูููู</h2>
            <button class="modal-close" id="day-modal-close">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>
        </div>
        <div class="modal-body">
            <div id="day-issues-list" class="space-y-3">
                <!-- Issues will be injected here -->
            </div>
        </div>
    </div>

    <!-- App Scripts -->
    <script type="module" src="js/app.js"></script>
    <script>
        // Initialize Lucide icons
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
        });
    </script>
</body>

</html>